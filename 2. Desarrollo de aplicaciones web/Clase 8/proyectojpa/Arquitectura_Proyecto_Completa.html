<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estructura del Proyecto Spring Boot con DTOs</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #2d3748 0%, #4a5568 100%);
            color: white;
            padding: 2rem;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 1.1rem;
        }
        
        .content {
            padding: 2rem;
        }
        
        .architecture-diagram {
            display: flex;
            flex-direction: column;
            gap: 2rem;
            margin: 2rem 0;
        }
        
        .layer {
            display: flex;
            align-items: center;
            background: #f8f9fa;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            position: relative;
        }
        
        .layer:hover {
            transform: translateY(-5px);
        }
        
        .layer-title {
            min-width: 200px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
            font-size: 1.1rem;
            margin-right: 2rem;
        }
        
        .layer-content {
            flex: 1;
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .component {
            background: white;
            border: 2px solid;
            border-radius: 10px;
            padding: 1rem;
            min-width: 200px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .component:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .controller { border-color: #e53e3e; }
        .dto { border-color: #38a169; }
        .service { border-color: #3182ce; }
        .repository { border-color: #d69e2e; }
        .model { border-color: #805ad5; }
        
        .component-title {
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        
        .component-desc {
            font-size: 0.9rem;
            color: #666;
        }
        
        .arrow {
            position: absolute;
            right: -20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 2rem;
            color: #667eea;
        }
        
        .flow-arrow {
            text-align: center;
            font-size: 2rem;
            color: #667eea;
            margin: 1rem 0;
        }
        
        .file-structure {
            background: #2d3748;
            color: #e2e8f0;
            padding: 2rem;
            border-radius: 15px;
            font-family: 'Courier New', monospace;
            margin: 2rem 0;
            overflow-x: auto;
        }
        
        .folder {
            color: #fbb6ce;
            font-weight: bold;
        }
        
        .file {
            color: #90cdf4;
        }
        
        .new-file {
            color: #68d391;
            font-weight: bold;
        }
        
        .data-flow {
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
        }
        
        .flow-step {
            display: flex;
            align-items: center;
            margin: 1rem 0;
            padding: 1rem;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .step-number {
            background: #667eea;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 1rem;
        }
        
        .benefits {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .benefit {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
        }
        
        .benefit-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
        
        @media (max-width: 768px) {
            .layer {
                flex-direction: column;
                text-align: center;
            }
            
            .layer-title {
                margin-right: 0;
                margin-bottom: 1rem;
                min-width: auto;
            }
            
            .layer-content {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ—ï¸ Arquitectura del Proyecto Spring Boot</h1>
            <p>Estructura completa con DTOs, Validaciones y Reglas de Negocio</p>
        </div>
        
        <div class="content">
            <h2 style="text-align: center; color: #2d3748; margin-bottom: 2rem;">ğŸ“Š Diagrama de Capas y Componentes</h2>
            
            <div class="architecture-diagram">
                <!-- Capa de PresentaciÃ³n -->
                <div class="layer">
                    <div class="layer-title">ğŸŒ PRESENTACIÃ“N</div>
                    <div class="layer-content">
                        <div class="component controller">
                            <div class="component-title">PersonaController</div>
                            <div class="component-desc">
                                â€¢ Endpoints REST<br>
                                â€¢ Manejo de HTTP<br>
                                â€¢ ValidaciÃ³n de entrada<br>
                                â€¢ Respuestas JSON
                            </div>
                        </div>
                    </div>
                    <div class="arrow">â¬‡ï¸</div>
                </div>

                <!-- Capa de DTOs -->
                <div class="layer">
                    <div class="layer-title">ğŸ“¦ DTOs</div>
                    <div class="layer-content">
                        <div class="component dto">
                            <div class="component-title">PersonaRequestDTO</div>
                            <div class="component-desc">
                                â€¢ Datos de entrada<br>
                                â€¢ Validaciones de formato<br>
                                â€¢ Limpieza de datos<br>
                                â€¢ Reglas de estructura
                            </div>
                        </div>
                        <div class="component dto">
                            <div class="component-title">PersonaResponseDTO</div>
                            <div class="component-desc">
                                â€¢ Datos de salida<br>
                                â€¢ Control de exposiciÃ³n<br>
                                â€¢ Formato de respuesta<br>
                                â€¢ SerializaciÃ³n JSON
                            </div>
                        </div>
                        <div class="component dto">
                            <div class="component-title">PersonaMapper</div>
                            <div class="component-desc">
                                â€¢ ConversiÃ³n DTO â†” Entidad<br>
                                â€¢ Mapeo de campos<br>
                                â€¢ Transformaciones<br>
                                â€¢ LÃ³gica de conversiÃ³n
                            </div>
                        </div>
                    </div>
                    <div class="arrow">â¬‡ï¸</div>
                </div>

                <!-- Capa de Servicio -->
                <div class="layer">
                    <div class="layer-title">âš™ï¸ SERVICIO</div>
                    <div class="layer-content">
                        <div class="component service">
                            <div class="component-title">IPersonaService</div>
                            <div class="component-desc">
                                â€¢ Interfaz del servicio<br>
                                â€¢ Contratos de mÃ©todos<br>
                                â€¢ DefiniciÃ³n de API<br>
                                â€¢ AbstracciÃ³n
                            </div>
                        </div>
                        <div class="component service">
                            <div class="component-title">PersonaService</div>
                            <div class="component-desc">
                                â€¢ LÃ³gica de negocio<br>
                                â€¢ ValidaciÃ³n de duplicados<br>
                                â€¢ CoordinaciÃ³n de operaciones<br>
                                â€¢ Transacciones
                            </div>
                        </div>
                    </div>
                    <div class="arrow">â¬‡ï¸</div>
                </div>

                <!-- Capa de Repositorio -->
                <div class="layer">
                    <div class="layer-title">ğŸ—„ï¸ REPOSITORIO</div>
                    <div class="layer-content">
                        <div class="component repository">
                            <div class="component-title">IPersonaRepository</div>
                            <div class="component-desc">
                                â€¢ Query Methods<br>
                                â€¢ Acceso a datos<br>
                                â€¢ Consultas automÃ¡ticas<br>
                                â€¢ Spring Data JPA
                            </div>
                        </div>
                    </div>
                    <div class="arrow">â¬‡ï¸</div>
                </div>

                <!-- Capa de Modelo -->
                <div class="layer">
                    <div class="layer-title">ğŸ›ï¸ MODELO</div>
                    <div class="layer-content">
                        <div class="component model">
                            <div class="component-title">Persona</div>
                            <div class="component-desc">
                                â€¢ Entidad JPA<br>
                                â€¢ Validaciones de dominio<br>
                                â€¢ Reglas intrÃ­nsecas<br>
                                â€¢ Mapeo a BD
                            </div>
                        </div>
                    </div>
                    <div class="arrow">â¬‡ï¸</div>
                </div>

                <!-- Base de Datos -->
                <div class="layer">
                    <div class="layer-title">ğŸ’¾ BASE DE DATOS</div>
                    <div class="layer-content">
                        <div class="component model">
                            <div class="component-title">MySQL</div>
                            <div class="component-desc">
                                â€¢ Tabla persona<br>
                                â€¢ Persistencia de datos<br>
                                â€¢ Transacciones ACID<br>
                                â€¢ Consultas SQL
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <h2 style="text-align: center; color: #2d3748; margin: 3rem 0 2rem 0;">ğŸ“ Estructura de Archivos</h2>
            
            <div class="file-structure">
<pre>
<span class="folder">proyectojpa/</span>
â”œâ”€â”€ <span class="folder">src/</span>
â”‚   â”œâ”€â”€ <span class="folder">main/</span>
â”‚   â”‚   â”œâ”€â”€ <span class="folder">java/</span>
â”‚   â”‚   â”‚   â””â”€â”€ <span class="folder">ar/edu/centro8/desarrollo/proyectojpa/</span>
â”‚   â”‚   â”‚       â”œâ”€â”€ <span class="file">ProyectojpaApplication.java</span>
â”‚   â”‚   â”‚       â”œâ”€â”€ <span class="folder">controller/</span>
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ <span class="file">PersonaController.java</span> <span style="color: #fbb6ce;">â† Actualizado con DTOs</span>
â”‚   â”‚   â”‚       â”œâ”€â”€ <span class="folder">dto/</span> <span style="color: #68d391;">â† Â¡NUEVA CAPA!</span>
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ <span class="new-file">PersonaRequestDTO.java</span> <span style="color: #68d391;">â† Nuevo</span>
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ <span class="new-file">PersonaResponseDTO.java</span> <span style="color: #68d391;">â† Nuevo</span>
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ <span class="new-file">PersonaMapper.java</span> <span style="color: #68d391;">â† Nuevo</span>
â”‚   â”‚   â”‚       â”œâ”€â”€ <span class="folder">model/</span>
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ <span class="file">Persona.java</span> <span style="color: #fbb6ce;">â† Con validaciones en setter</span>
â”‚   â”‚   â”‚       â”œâ”€â”€ <span class="folder">repository/</span>
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ <span class="file">IPersonaRepository.java</span> <span style="color: #fbb6ce;">â† Con Query Methods</span>
â”‚   â”‚   â”‚       â””â”€â”€ <span class="folder">service/</span>
â”‚   â”‚   â”‚           â”œâ”€â”€ <span class="file">IPersonaService.java</span> <span style="color: #fbb6ce;">â† Actualizada con DTOs</span>
â”‚   â”‚   â”‚           â””â”€â”€ <span class="file">PersonaService.java</span> <span style="color: #fbb6ce;">â† Con reglas de negocio</span>
â”‚   â”‚   â””â”€â”€ <span class="folder">resources/</span>
â”‚   â”‚       â””â”€â”€ <span class="file">application.properties</span>
â”‚   â””â”€â”€ <span class="folder">test/</span>
â”œâ”€â”€ <span class="file">pom.xml</span> <span style="color: #fbb6ce;">â† Spring Boot 3.5.0</span>
â”œâ”€â”€ <span class="new-file">DTO_Guia_Completa.html</span> <span style="color: #68d391;">â† DocumentaciÃ³n DTOs</span>
â”œâ”€â”€ <span class="new-file">Query_Methods_Guia_Completa.html</span> <span style="color: #68d391;">â† DocumentaciÃ³n Query Methods</span>
â””â”€â”€ <span class="new-file">TypeSafety_Ejemplo.java</span> <span style="color: #68d391;">â† Ejemplo Type Safety</span>
</pre>
            </div>

            <h2 style="text-align: center; color: #2d3748; margin: 3rem 0 2rem 0;">ğŸ”„ Flujo de Datos con DTOs</h2>
            
            <div class="data-flow">
                <div class="flow-step">
                    <div class="step-number">1</div>
                    <div>
                        <strong>Cliente envÃ­a JSON</strong><br>
                        <code>POST /personas/crear {"nombre": "Juan", "edad": 25}</code>
                    </div>
                </div>

                <div class="flow-step">
                    <div class="step-number">2</div>
                    <div>
                        <strong>Controller recibe PersonaRequestDTO</strong><br>
                        Spring convierte automÃ¡ticamente JSON â†’ PersonaRequestDTO
                    </div>
                </div>

                <div class="flow-step">
                    <div class="step-number">3</div>
                    <div>
                        <strong>DTO valida formato</strong><br>
                        personaDTO.validar() - verifica que nombre tenga â‰¥ 2 caracteres
                    </div>
                </div>

                <div class="flow-step">
                    <div class="step-number">4</div>
                    <div>
                        <strong>Service valida lÃ³gica de negocio</strong><br>
                        validarNombreUnico() - verifica que no exista otra persona con mismo nombre
                    </div>
                </div>

                <div class="flow-step">
                    <div class="step-number">5</div>
                    <div>
                        <strong>Mapper convierte DTO â†’ Entidad</strong><br>
                        PersonaMapper.toEntity(personaDTO) â†’ Persona
                    </div>
                </div>

                <div class="flow-step">
                    <div class="step-number">6</div>
                    <div>
                        <strong>Entidad valida dominio</strong><br>
                        persona.setEdad(25) - verifica que edad estÃ© entre 0 y 120
                    </div>
                </div>

                <div class="flow-step">
                    <div class="step-number">7</div>
                    <div>
                        <strong>Repository guarda en BD</strong><br>
                        persoRepo.save(persona) - usa Query Methods de Spring Data JPA
                    </div>
                </div>

                <div class="flow-step">
                    <div class="step-number">8</div>
                    <div>
                        <strong>Mapper convierte Entidad â†’ DTO</strong><br>
                        PersonaMapper.toResponseDTO(persona) â†’ PersonaResponseDTO
                    </div>
                </div>

                <div class="flow-step">
                    <div class="step-number">9</div>
                    <div>
                        <strong>Controller devuelve JSON</strong><br>
                        Spring convierte PersonaResponseDTO â†’ JSON automÃ¡ticamente
                    </div>
                </div>
            </div>

            <h2 style="text-align: center; color: #2d3748; margin: 3rem 0 2rem 0;">âœ¨ Beneficios de esta Arquitectura</h2>
            
            <div class="benefits">
                <div class="benefit">
                    <div class="benefit-icon">ğŸ›¡ï¸</div>
                    <h4>Validaciones en Capas</h4>
                    <p>DTO: formato, Modelo: dominio, Servicio: lÃ³gica de negocio</p>
                </div>
                
                <div class="benefit">
                    <div class="benefit-icon">ğŸ”§</div>
                    <h4>SeparaciÃ³n de Responsabilidades</h4>
                    <p>Cada capa tiene una funciÃ³n especÃ­fica y bien definida</p>
                </div>
                
                <div class="benefit">
                    <div class="benefit-icon">ğŸ“¦</div>
                    <h4>Desacoplamiento</h4>
                    <p>DTOs separan la API de la estructura interna de datos</p>
                </div>
                
                <div class="benefit">
                    <div class="benefit-icon">ğŸ”„</div>
                    <h4>Facilidad de Mantenimiento</h4>
                    <p>Cambios en una capa no afectan las demÃ¡s</p>
                </div>
                
                <div class="benefit">
                    <div class="benefit-icon">ğŸ§ª</div>
                    <h4>Testeable</h4>
                    <p>Cada componente se puede probar de forma independiente</p>
                </div>
                
                <div class="benefit">
                    <div class="benefit-icon">âš¡</div>
                    <h4>Type Safety</h4>
                    <p>Query Methods y DTOs garantizan verificaciÃ³n de tipos</p>
                </div>
            </div>

            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 2rem; border-radius: 15px; text-align: center; margin: 3rem 0;">
                <h3>ğŸ“ Arquitectura Completa Spring Boot</h3>
                <p>Proyecto con DTOs, Query Methods, Validaciones Multi-capa y Type Safety</p>
                <p><em>Spring Boot 3.5.0 + Java 21 + Spring Data JPA + MySQL</em></p>
            </div>
        </div>
    </div>
</body>
</html>